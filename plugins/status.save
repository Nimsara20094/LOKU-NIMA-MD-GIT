/*ğ’ğ“ğ€ğ“ğ”ğ’ ğŠğˆğğ† ğ‹ğğŠğ” ğğˆğŒğ€ğ‡*/

const { cmd } = require("../command");
const fs = require("fs");

let statusData = {};  // A simple object to store the statuses

cmd({
    pattern: "statussave",
    alias: "setstatus",
    desc: "Save a custom status.",
    category: "user",
    react: "ğŸ’¬",
    use: "<status message>",
    filename: __filename,
}, async (conn, mek, m, { from, args, q, reply }) => {
    try {
        if (!q) return reply("âš ï¸ Please provide a status message.\n\nExample:\n.statussave Working on my project!");

        // Saving status message to the object
        statusData[from] = q;

        // Optionally save the status to a file (JSON format)
        fs.writeFileSync('./statusData.json', JSON.stringify(statusData, null, 2));

        return reply(`âœ… Your status has been saved!\n\n*Status:* ${q}`);

    } catch (error) {
        console.error("Error in saving status:", error);
        return reply("âŒ An error occurred while saving your status. Please try again later.");
    }
});

// Optionally, you can add another command to retrieve the saved status
cmd({
    pattern: "getstatus",
    alias: "status",
    desc: "Retrieve your saved status.",
    category: "user",
    react: "ğŸ’¬",
    use: "View saved status",
    filename: __filename,
}, async (conn, mek, m, { from, reply }) => {
    try {
        const savedStatus = statusData[from] || "You don't have a saved status yet.";
        return reply(`ğŸ”¹ Your saved status is:\n*${savedStatus}*`);

    } catch (error) {
        console.error("Error in retrieving status:", error);
        return reply("âŒ An error occurred while fetching your status. Please try again later.");
    }
});
